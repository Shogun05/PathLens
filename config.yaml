# Tunable parameters for PathLens starter pipeline
place: "Bangalore, India"
network_type: "walk"
walking_speed_kmph: 4.8

amenity_weights:
  school: 1.5
  hospital: 2.5      # Includes: hospital, clinic, doctors
  pharmacy: 2.0
  supermarket: 2.5   # Includes: supermarket, grocery, convenience, mall, marketplace
  bus_station: 1.5
  park: 1.2
  bank: 1.8          # Includes: bank, atm

composite_weights:
  alpha: 0.05   # Structure weight (fixed infrastructure)
  beta: 0.80    # Accessibility weight (amenity proximity)
  gamma: 0.05   # Equity weight (spatial fairness)
  delta: 0.10   # Travel time weight (walkability speed)

equity_thresholds:
  school: 1000 # meters
  hospital: 1500
  pharmacy: 800
  supermarket: 1000
  bus_station: 800
  park: 900
  bank: 800

h3:
  resolution: 8

centrality:
  enabled: true
  sample_k: 150
  compute_betweenness: true
  compute_closeness: false
  seed: 42

amenity_distance_cutoff_m: null  # null = no cutoff, compute all distances

circuity_sample_k: 120

# MILP Optimization Configuration
milp:
  # Budget constraints: maximum number of new amenities per type
  amenity_budgets:
    school: 30
    hospital: 25
    pharmacy: 25
    supermarket: 30
    bus_station: 40
    park: 25
    bank: 20
  
  # Solver settings
  time_limit_seconds: 300  # 5 minutes default
  gap_tolerance: 0.01      # 1% optimality gap
  
  # Equity settings
  enable_equity: true
  equity_min_coverage: 0.5  # Minimum coverage per hexagon (if enabled)
  
  # Performance tuning
  use_population_weights: true
  max_candidates: null      # Limit candidates for testing (null = all)

# Hybrid GA-MILP Configuration
hybrid_milp:
  enabled: true  # Set to true to enable MILP refinement during GA evolution
  
  # MILP solver settings
  time_limit_seconds: 3.0  # Fast solve per candidate (3s for more complex problems)
  
  # Optimization window settings
  max_amenities_to_relocate: 6  # Larger local window for more relocations
  max_hexagons_to_optimize: 5   # Optimize more neighborhoods simultaneously
  
  # Selection strategy: "worst_hexagons", "least_contributing", or "random"
  selection_strategy: "worst_hexagons"
  
  # Application policy
  apply_to_elite_only: true  # Only refine top 20% of population
  apply_every_n_generations: 1  # Frequency (1 = every generation)
  max_candidates_per_generation: 5  # Limit MILP calls per generation
  
  # Acceptance criteria
  min_improvement_threshold: 0.01  # Accept only if fitness improves by â‰¥1%
  
  # Caching
  enable_caching: true
  cache_dir: "cache/milp_refinement"
